# الخطة الشاملة لاختبار موقع منازل العقاري

## 1. اختبار دعم اللغات المتعددة (الإنجليزية / العربية)

*   **1.1. مفتاح تبديل اللغة:**
    *   [X] التحقق من وجود مفتاح تبديل اللغة في رأس الصفحة (Header) في جميع الصفحات (العامة والإدارية).
    *   [X] التحقق من أن المفتاح يقوم بالتبديل الفعلي بين اللغتين الإنجليزية والعربية.
    *   [X] التحقق من أن اللغة المختارة يتم حفظها في جلسة المستخدم (Session) وتستمر عبر التنقل بين الصفحات.
    *   [X] التحقق من أن اتجاه النص (LTR/RTL) يتغير بشكل صحيح مع تغير اللغة.
*   **1.2. ترجمة المحتوى الثابت:**
    *   [X] التحقق من ترجمة جميع عناصر الواجهة الثابتة (مثل العناوين، الأزرار، القوائم، التذييل) في جميع الصفحات العامة.
    *   [X] التحقق من ترجمة جميع عناصر الواجهة الثابتة في صفحات لوحة تحكم المسؤول.
*   **1.3. ترجمة المحتوى الديناميكي:**
    *   [X] التحقق من عرض تفاصيل العقارات (العنوان، الوصف، العنوان التفصيلي) باللغة المختارة.
    *   [X] التحقق من عرض بيانات المستخدم (مثل اسم المستخدم في صفحة الملف الشخصي) بشكل صحيح بغض النظر عن اللغة (إذا كانت البيانات نفسها ليست مترجمة).
    *   [X] التحقق من عرض رسائل النظام (مثل رسائل النجاح والخطأ) باللغة المختارة.
## 2. اختبار وظائف المستخدم (التسجيل، الدخول، الملف الشخصي)

*   **2.1. تسجيل حساب جديد:**
    *   [X] التحقق من إمكانية تسجيل حساب جديد ببيانات صالحة.
    *   [X] التحقق من رفض التسجيل ببيانات غير صالحة (مثل بريد إلكتروني مكرر، اسم مستخدم مكرر، كلمة مرور قصيرة، عدم تطابق كلمة المرور).
    *   [X] التحقق من عرض رسائل خطأ واضحة ومترجمة عند فشل التسجيل.
    *   [X] التحقق من عرض رسالة نجاح مترجمة عند اكتمال التسجيل.
*   **2.2. تسجيل الدخول والخروج:**
    *   [X] التحقق من إمكانية تسجيل الدخول ببيانات اعتماد صالحة.
    *   [X] التحقق من رفض تسجيل الدخول ببيانات اعتماد غير صالحة.
    *   [X] التحقق من عرض رسالة خطأ مترجمة عند فشل تسجيل الدخول.
    *   [X] التحقق من إعادة توجيه المستخدم إلى الصفحة المناسبة بعد تسجيل الدخول (الملف الشخصي أو لوحة التحكم للمسؤول).
    *   [X] التحقق من إمكانية تسجيل الخروج بنجاح.
    *   [X] التحقق من إعادة توجيه المستخدم إلى صفحة تسجيل الدخول بعد الخروج.
*   **2.3. صفحة الملف الشخصي:**
    *   [X] التحقق من أن المستخدم المسجل دخوله فقط يمكنه الوصول إلى صفحة الملف الشخصي.
    *   [X] التحقق من عرض بيانات المستخدم بشكل صحيح (اسم المستخدم، البريد الإلكتروني، تاريخ التسجيل).
    *   [X] التحقق من إمكانية تحديث بيانات الملف الشخصي (اسم المستخدم، البريد الإلكتروني، كلمة المرور اختيارية).
    *   [X] التحقق من رفض تحديث الملف الشخصي ببيانات غير صالحة (مثل بريد إلكتروني مستخدم من قبل شخص آخر).
    *   [X] التحقق من عرض العقارات التي يتابعها المستخدم.
    *   [X] التحقق من عرض التقييمات التي قدمها المستخدم.

## 3. اختبار وظائف لوحة تحكم المسؤول

*   **3.1. الوصول إلى لوحة التحكم:**
    *   [X] التحقق من أن المستخدم بدور "admin" فقط يمكنه الوصول إلى صفحات لوحة التحكم.
    *   [X] التحقق من إعادة توجيه المستخدمين العاديين إلى صفحة أخرى (مثل تسجيل الدخول أو الصفحة الرئيسية) عند محاولة الوصول إلى لوحة التحكم.
*   **3.2. إدارة العقارات:**
    *   [X] التحقق من عرض قائمة العقارات بشكل صحيح مع خيارات التصفية والترقيم (Pagination).
    *   [X] التحقق من إمكانية إضافة عقار جديد بجميع التفاصيل المطلوبة (بما في ذلك الترجمات للإنجليزية والعربية).
    *   [X] التحقق من إمكانية تعديل عقار موجود.
    *   [X] التحقق من إمكانية حذف عقار موجود (مع رسالة تأكيد).
    *   [X] التحقق من صحة البيانات عند إضافة وتعديل العقارات.
*   **3.3. إدارة المستخدمين:**
    *   [X] التحقق من عرض قائمة المستخدمين بشكل صحيح.
    *   [X] التحقق من إمكانية تعديل بيانات المستخدم (اسم المستخدم، البريد الإلكتروني، الدور، كلمة المرور اختيارية).
    *   [X] التحقق من عدم إمكانية تغيير دور المسؤول الرئيسي أو حذف حسابه بسهولة (قيود الأمان).
    *   [X] التحقق من إمكانية حذف مستخدم (مع رسالة تأكيد).

## 4. اختبار وظائف العقارات (العرض، البحث، التصفية، التفاصيل)

*   **4.1. عرض قائمة العقارات:**
    *   [X] التحقق من عرض العقارات في الصفحة الرئيسية وصفحة القوائم بشكل صحيح.
    *   [X] التحقق من عرض الصور المصغرة للعقارات (Primary Image).
    *   [X] التحقق من عمل الترقيم (Pagination) بشكل صحيح.
*   **4.2. البحث والتصفية:**
    *   [X] التحقق من عمل نموذج البحث الأساسي (بالكلمة المفتاحية).
    *   [X] التحقق من عمل فلاتر البحث المتقدمة (نوع العقار، عدد الغرف، السعر، إلخ) في صفحة القوائم.
    *   [X] التحقق من عرض النتائج بشكل صحيح بناءً على معايير البحث والتصفية.
*   **4.3. صفحة تفاصيل العقار:**
    *   [X] التحقق من عرض جميع تفاصيل العقار بشكل صحيح (السعر، المساحة، الغرف، الحمامات، الوصف، المميزات، الموقع على الخريطة - كعنصر نائب).
    *   [X] التحقق من عرض معرض صور العقار.
    *   [X] التحقق من عرض متوسط التقييم وعدد التقييمات.
    *   [X] التحقق من عرض قائمة تقييمات المستخدمين.

## 5. اختبار وظائف تقييم ومتابعة العقارات

*   **5.1. تقييم العقارات:**
    *   [X] التحقق من أن المستخدم المسجل دخوله فقط يمكنه تقييم العقار.
    *   [X] التحقق من إمكانية إضافة تقييم جديد (قيمة التقييم وتعليق اختياري).
    *   [X] التحقق من إمكانية تعديل التقييم الحالي للمستخدم لنفس العقار.
    *   [X] التحقق من ظهور التقييم الجديد/المعدل في صفحة تفاصيل العقار وفي ملف المستخدم الشخصي.
*   **5.2. متابعة العقارات:**
    *   [X] التحقق من أن المستخدم المسجل دخوله فقط يمكنه متابعة/إلغاء متابعة العقار.
    *   [X] التحقق من عمل زر المتابعة/إلغاء المتابعة بشكل صحيح.
    *   [X] التحقق من ظهور العقارات المتبعة في ملف المستخدم الشخصي.

## 6. اختبار واجهة المستخدم والاستجابة (Responsive Design)

*   **6.1. الاتساق البصري:**
    *   [X] التحقق من اتساق التصميم والألوان والخطوط عبر جميع صفحات الموقع.
*   **6.2. الاستجابة للأجهزة المختلفة:**
    *   [X] (محاكاة نظرية) التحقق من أن تصميم الموقع يبدو جيدًا ويعمل بشكل صحيح على أحجام شاشات مختلفة (سطح المكتب، الجهاز اللوحي، الهاتف المحمول) بناءً على استخدام CSS معياري.

## 7. اختبار معالجة الأخطاء والتحقق من المدخلات

*   **7.1. التحقق من صحة المدخلات من جانب الخادم:**
    *   [X] التحقق من أن جميع النماذج (تسجيل، دخول، إضافة/تعديل عقار، إضافة/تعديل مستخدم، اتصال، تقييم) تقوم بالتحقق من صحة المدخلات من جانب الخادم.
    *   [X] التحقق من عرض رسائل خطأ مناسبة عند إدخال بيانات غير صالحة.
*   **7.2. معالجة الأخطاء العامة:**
    *   [X] التحقق من عرض صفحة 404 مخصصة (أو رسالة) عند طلب مسار غير موجود.
    *   [X] (محاكاة نظرية) التحقق من معالجة أخطاء قاعدة البيانات بشكل آمن دون كشف معلومات حساسة.

## 8. اختبار الأمان (بشكل أساسي)

*   **8.1. حماية كلمة المرور:**
    *   [X] التحقق من أن كلمات المرور يتم تجزئتها (Hashing) قبل تخزينها في قاعدة البيانات.
*   **8.2. حماية من هجمات XSS الأساسية:**
    *   [X] التحقق من أن مدخلات المستخدم يتم تعقيمها (Sanitized) قبل عرضها في الواجهة (باستخدام الدالة `e()`).
*   **8.3. حماية من هجمات CSRF الأساسية:**
    *   [X] (ملاحظة) لم يتم تنفيذ رموز CSRF بشكل صريح، ولكن استخدام POST للعمليات الحساسة يوفر مستوى أساسي من الحماية. يجب التوصية بإضافة رموز CSRF للتحسين.
*   **8.4. التحكم في الوصول بناءً على الدور:**
    *   [X] التحقق من أن وظائف المسؤول لا يمكن الوصول إليها أو تنفيذها من قبل المستخدمين العاديين.

## 9. مراجعة الكود الأساسية

*   **9.1. هيكل المشروع:**
    *   [X] التحقق من أن هيكل الملفات والمجلدات منظم ومنطقي.
*   **9.2. تعليقات الكود:**
    *   [X] التحقق من وجود تعليقات توضيحية في الأجزاء المعقدة من الكود.
*   **9.3. قابلية القراءة:**
    *   [X] التحقق من أن الكود مكتوب بطريقة تسهل قراءته وفهمه.

